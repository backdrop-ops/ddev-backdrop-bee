name: backdrop-bee

pre_install_actions:
  - |
    #ddev-nodisplay
    #ddev-description:Check for existing .ddev/commands/web/bee
    if [ -f .ddev/commands/web/bee ]; then
      echo "The logic from .ddev/commands/web/bee is moved to .ddev/commands/host/bee"
      echo "The logic from .ddev/web-build/Dockerfile is moved to .ddev/web-build/Dockerfile.bee"
      echo "Remove .ddev/commands/web/bee and .ddev/web-build/Dockerfile and run this command again"
      exit 1
    fi
  - |
    #ddev-nodisplay
    #ddev-description:Check for backdrop project type
    if ! ddev debug configyaml | grep -q "^type:.*backdrop"; then
      echo "This add-on is only available for projects with backdrop type"
      exit 2
    fi

project_files:
  - web-build/Dockerfile.bee
  - commands/host/bee

ddev_version_constraint: '>= v1.24.3'
